{"version":3,"sources":["./src/app/users/state/user.effects.ts","./src/app/users/service/users.service.ts","./src/app/users/users.module.ts"],"names":[],"mappings":"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","file":"users-users-module.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\nimport { of } from 'rxjs';\nimport { catchError, concatMap, map, mergeMap } from 'rxjs/operators';\nimport { UsersService } from '../service/users.service';\nimport * as UsersActions from '../state/user.actions';\n\n@Injectable()\nexport class UserEffects {\n\n  constructor(\n    private actions$: Actions,\n    private usersService: UsersService) {}\n\n    loadUsers$ = createEffect( () => {\n      return this.actions$.pipe(\n        ofType(UsersActions.searchUsersByFilterSearchText),\n        mergeMap( action => \n          this.usersService.getUsersByFullSearchText(action.filterSearchText)\n          .pipe(\n            map( users => UsersActions.loadUsersSuccess({users})),\n            catchError(error => of(UsersActions.loadUsersFailure({error})))\n          ),\n        )          \n      );\n    })\n}\n","import { Injectable } from '@angular/core';\nimport { Users } from '../model/users';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, tap, map } from 'rxjs/operators';\nimport { getUsers } from '../state/user.reducer';\n \n@Injectable({\n  providedIn: 'root'\n})\nexport class UsersService {\n\n  readonly usersUrl = \"http://localhost:3000/users\";\n  \n  constructor(private http: HttpClient) { }\n\n  getUsers(): Observable<Users[]>{\n    \n    return this.http.get<Users[]>(this.usersUrl)\n    .pipe(\n      tap(data => console.log(JSON.stringify(data))),      \n      catchError(this.handleError)\n    );\n  }\n\n  getUsersByFullSearchText(search: string): Observable<Users[]> {\n\n    if (search === null)\n    {\n      return this.getUsers();\n    }\n\n    return this.http.get<Users[]>(this.usersUrl + '?q=' + search)\n    .pipe(\n      tap(data => console.log(JSON.stringify(data))),\n      catchError(this.handleError)\n    );\n  }\n\n  private handleError(err: any) {\n\n    let errorMessage: string;\n    if (err.error instanceof ErrorEvent) {\n\n      errorMessage = `An error occurred: ${err.error.message}`;\n    } else {\n\n      errorMessage = `Backend returned code ${err.status}: ${err.body.error}`;\n    }\n    console.error(err);\n    return throwError(errorMessage);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { UsersHomeComponent } from '../users/users-home/users-home.component';\nimport { UsersListComponent } from '../users/users-list/users-list.component';\nimport { UsersSearchComponent } from '../users/users-search/users-search.component';\nimport { StoreModule } from '@ngrx/store';\nimport { usersReducer } from './state/user.reducer';\nimport { Routes, RouterModule } from '@angular/router';\nimport { AppModule } from '../app.module';\nimport { EffectsModule } from '@ngrx/effects';\nimport { UserEffects } from './state/user.effects';\nimport { ReactiveFormsModule} from '@angular/forms';\nimport { DatepickerComponent } from '../shared/datepicker/datepicker.component';\nimport { DropdownComponent } from '../shared/dropdown/dropdown.component';\n\nconst userRoutes: Routes = [\n  { path: '', component: UsersHomeComponent }\n];\n\n@NgModule({\n  declarations: [\n    UsersHomeComponent,\n    UsersListComponent,\n    UsersSearchComponent,\n    DatepickerComponent,\n    DropdownComponent\n  ],\n  imports: [\n    CommonModule,    \n    FormsModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(userRoutes),\n    StoreModule.forFeature('users', usersReducer),\n    EffectsModule.forFeature([UserEffects])\n  ]\n})\nexport class UsersModule { }\n"],"sourceRoot":"webpack:///"}